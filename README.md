
![](https://github.com/user-attachments/assets/fa760599-4a20-4ea4-a6d2-84a74a6c0952)


# spotify-nowplay

Spotifyで再生中の曲をWebページで公開するツールです。

## 使い方

[注意]Spotifyのリフレッシュトークンを取得するためにローカル環境でサーバーを立ち上げる必要があります。  
リフレッシュトークンをお持ちの場合は問題ありません。

### 事前準備
https://developer.spotify.com にアクセスし、アプリケーションを登録してください。  
この際に、コールバックURLに`http://127.0.0.1/4400/callback` を設定してください。  
その他の入力事項は任意です。  

ここで生成したアプリケーションの設定ファイルからクライアントIDとシークレットを取得し控えておきます。

### サーバーの準備
まず、ルートディレクトリに`.env`ファイルを作成し、`env.example`の内容をコピーしてください。  
こちらに先ほど取得したクライアントIDとシークレットを記述してください。

次に、serverディレクトリに移動し、以下のコマンドを実行してください。  
ビルドしてバイナリを実行しても問題ありません。

```bash:server
go run main.go
```

コマンドを実行すると、クライアントIDとシークレットをもとに認証用URLが起動しますので、URLにジャンプし認証を行います。  
認証が完了すると、リフレッシュトークンが取得されます。

再度実行すると、リフレッシュトークンが使われ、WSの送信を始めます。

### 閲覧ページの準備
frontディレクトリを開き、以下のコマンドを実行してください。

```bash:front
npm install
npm run serve
```

## 外部で公開する方法
描画部分（frontディレクトリに格納されているファイル）を切り分けてNetlifyやCloudflarePageを使う形で公開可能です。  
この場合、app.vueで定義されている取得用のURLをサーバーのIPもしくはURLに変更してください。
